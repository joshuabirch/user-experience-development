<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <!--Meta data for mobile reponsiveness-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <!--Local Stylesheet-->
    <link rel="stylesheet" href="style.css">
    
    <!--Fontawesome CDN link-->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>


    <!--Bootstrap CDN Link-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    
    
    <!--Shoelace CDN Link-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.25/dist/shoelace/shoelace.css">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.25/dist/shoelace/shoelace.esm.js"></script>


    <!--Phaser JS plugin intialise and basketball external JS-->
    <script type="text/javascript" src="phaser.min.js"></script>
    <script type="text/javascript" src="basketball.js"></script>

    <script defer src="quiz.js"></script>

    <script defer src="split-bill.js"></script>

    <!--Title of Page-->
    <title>Reduce.</title>
    
</head>
<body>

    <!--Main Section-->
    <section id="main">
        <!--Custom Container-->
        <div class="container" style="max-width:500px!important;">
            <!-- <div class="points-wheel mt-5 mx-auto text-center text-white d-flex justify-content-center">
                <span class="display-2">98</span>
                <span>pts</span>
            </div>
            <div class="row no-gutters d-flex justify-content-center mt-5">
                <div class="d-flex justify-content-center intro-stats text-center">
                    <div class="card text-white mb-3 mx-3 p-2" style="min-width: 7rem; border-radius: 15px;">
                        <div class="card-body">
                        <h5 class="card-text">1st</h5>
                        <p class="card-text">place</p>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center intro-stats text-center">
                    <div class="card text-white mb-3 mx-3 p-2" style="min-width: 7rem; border-radius: 15px;">
                        <div class="card-body">
                        <h5 class="card-text">£17.70</h5>
                        <p class="card-text">saved</p>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center intro-stats text-center">
                    <div class="card text-white mb-3 mx-3 p-2" style="min-width: 7rem; border-radius: 15px;">
                        <div class="card-body">
                        <h5 class="card-text">8</h5>
                        <p class="card-text">units</p>
                        </div>
                    </div>
                </div>
            </div>
            <h2 class="mt-3">Need some more points?</h2>
            <div class="row mt-3">
                <div class="card mt-2">
                    <div class="card-body">
                        <h5 class="card-title text-white">Quiz 1</h5>
                        <p class="card-text text-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestiae amet fugiat debitis blanditiis, a adipisci itaque in ducimus temporibus recusandae consequatur! Quos fugit eius a at accusantium consequatur. Voluptatem, sunt.</p>
                    </div>
                </div>
                <div class="card mt-2">
                    <div class="card-body">
                        <h5 class="card-title text-white">Quiz 2</h5>
                        <p class="card-text text-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestiae amet fugiat debitis blanditiis, a adipisci itaque in ducimus temporibus recusandae consequatur! Quos fugit eius a at accusantium consequatur. Voluptatem, sunt.</p>
                    </div>
                </div>
                <div class="card mt-2">
                    <div class="card-body">
                        <h5 class="card-title text-white">Quiz 3</h5>
                        <p class="card-text text-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestiae amet fugiat debitis blanditiis, a adipisci itaque in ducimus temporibus recusandae consequatur! Quos fugit eius a at accusantium consequatur. Voluptatem, sunt.</p>
                    </div>
                </div>
            </div> -->

            <!--Rings-->
            <div class="row no-gutters mx-auto text-center d-flex justify-content-center mt-md-5 mt-4">
                <sl-progress-ring
                    class="progress-ring-labels" 
                    percentage="68" 
                    size="275" 
                    stroke-width="20"
                    style="--track-color: #ffffff; --indicator-color: #3d2388;"
                >
                68
                </sl-progress-ring>

            </div>

            <!--League Text-->
            <div class="row no-gutters d-flex align-items-center">
                <h3 class="my-4 align-self-center">Your League</h2>
                <h5 class="ml-auto my-4 align-self-end"><a class="link-dark" href="league.html">View all <i class="fas fa-chevron-right fa-xs"></i></a></h5>
            </div>

            <!--League Cards-->
            <div class="row no-gutters">
                <div class="w-100" id="accordion">
                    
                    <div class="card league-card mb-2">
                        <div class="card-header" id="headingOne">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed w-100 d-flex align-items-center" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    <span class="fs-mb pr-3 font-weight-bold" style="font-size: 1.444rem;">4</span>
                                    <img class="profile-img" src="james-barker-profile.jpg" width="70" height="70" style="border-radius:50%;">
                                    <span class="fs-mb pl-3 font-weight-bold" style="font-size: 1.444rem;">James Barker</span>
                                    <span class="ml-auto points px-3 d-flex flex-column align-items-center">74<span style="font-size: 0.777rem;margin-top:-10px;">pts</span></span><i class="far fa-arrow-alt-circle-down fa-lg"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseOne" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                            <div class="card-body">
                                <ul class="sub-interactions">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-gamepad pr-2"></i>
                                        <a id="send-challenge" class="w-100 pe-auto">Send a Challenge</a>
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-chart-bar pr-2"></i>
                                        <a id="compare-statistics" class="w-100 pe-auto">Compare Statistics</a>
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-users pr-2"></i>
                                        <a id="pub-quiz" class="w-100 pe-auto">Compete in a Pub Quiz</a>
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-beer pr-2"></i>
                                        <a id="share-bill" class="w-100 pe-auto">Share a Bill</a>
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                </ul>
                          </div>
                        </div>
                    </div>

                    <div class="card league-card mb-2">
                        <div class="card-header user-bg" id="headingTwo">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed w-100 d-flex align-items-center" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <span class="fs-mb pr-3 font-weight-bold text-white" style="font-size:1.444rem;">5</span>
                                    <img class="profile-img" src="emilia-hurley-profile.jpg" width="70" height="70" style="border-radius:50%;">
                                    <span class="fs-mb pl-3 font-weight-bold text-white text-left" style="font-size:1.444rem;">Emilia Hurley</span>
                                    <span class="ml-auto points px-3 d-flex flex-column align-items-center text-white">68<span style="font-size: 0.777rem;margin-top:-10px;">pts</span></span><i class="far fa-arrow-alt-circle-down fa-lg text-white"></i>
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                            <div class="card-body">
                                <ul class="sub-interactions">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-gamepad pr-2"></i>
                                        Send a Challenge
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-chart-bar pr-2"></i>
                                        Compare Statistics
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-users pr-2"></i>
                                        Compete in a Pub Quiz
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-beer pr-2"></i>
                                        Share a Bill
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="card league-card" style="margin-bottom: 10rem;">
                        <div class="card-header" id="headingThree">
                            <h5 class="mb-0">
                            <button class="btn btn-link collapsed w-100 d-flex align-items-center" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <span class="fs-mb pr-3 font-weight-bold" style="font-size: 1.444rem;">6</span>
                                <img class="profile-img" src="fredrica-profile.jpg" width="70" height="70" style="border-radius:50%;">
                                <span class="fs-mb pl-3 font-weight-bold text-left" style="font-size: 1.444rem;">Fredrica Wampler</span>
                                <span class="ml-auto points px-3 d-flex flex-column align-items-center">52<span style="font-size: 0.777rem;margin-top:-10px;">pts</span></span><i class="far fa-arrow-alt-circle-down fa-lg"></i>
                            </button>
                            </h5>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                            <div class="card-body">
                                <ul class="sub-interactions">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-gamepad pr-2"></i>
                                        Send a Challenge
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-chart-bar pr-2"></i>
                                        Compare Statistics
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-users pr-2"></i>
                                        Compete in a Pub Quiz
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-beer pr-2"></i>
                                        Share a Bill
                                        <i class="fas fa-chevron-right ml-auto"></i>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Navigation-->
            <div class="row no-gutters d-flex justify-content-center fixed-bottom w-100">
                
                <!--Actual Navigation Bar-->
                <ul class="navigation d-flex justify-content-around w-100">
                    <li class="align-self-center"><a class="d-flex align-items-center flex-column" href="index.html"><i class="fas fa-th-large fa-lg pb-1"></i><span class="nav-item">Dashboard</span></a></li>
                    <li class="align-self-center"><a class="d-flex align-items-center flex-column" href="league.html"><i class="fas fa-bars fa-lg pb-1"></i><span class="nav-item">League</span></a></li>
                    <li class="align-self-center"><a class="d-flex align-items-center flex-column" href="summary.html"><i class="fas fa-chart-bar fa-lg pb-1"></i><span class="nav-item">Summary</span></a></li>
                    <li class="align-self-center"><a class="d-flex align-items-center flex-column" href="profile.html"><i class="fas fa-user-alt fa-lg pb-1"></i><span class="nav-item">Profile</span></a></li>
                </ul>

                
                <!--Add Drinks Drawer-->
                <sl-drawer placement="bottom" class="drawer-placement-bottom" style="max-width:500px;--size:30vw;">
                    <h3 id="drawerTitle" class="text-center font-weight-bold px-md-5">How many drinks have you had today?</h3>
                    <p class="text-center" style="font-family:SF UI Display Light;">your daily average: 8 drinks</p>
                    
                    <!--Daily Rings-->
                    <div class="d-flex justify-content-center align-items-center">
                        <sl-progress-ring class="daily-ring" percentage="90" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">M</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="70" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">T</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="60" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">W</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="40" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">T</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="50" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">F</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="70" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">S</sl-progress-ring>
                        <sl-progress-ring class="daily-ring" percentage="68" size="45" style="--track-color: #ABABAB; --indicator-color: #3D2388;">S</sl-progress-ring>
                    </div>

                    <!--Main Add Ring-->
                    <div class="d-flex justify-content-center align-items-center mt-2">
                        <sl-button size="large" id="minus-btn" circle><sl-icon name="dash"></sl-icon></sl-button>
                        <sl-progress-ring class="add-ring" percentage="0" size="220" stroke-width="15" style="--track-color: #eeeeee; --indicator-color: #3D2388;">0</sl-progress-ring>
                        <sl-button size="large" id="add-btn" circle><sl-icon name="plus"></sl-icon></sl-button>
                    </div>

                    <!--Add Drinks Button-->
                    <div class="d-grid">
                        <button id="drawerAdd" class="btn btn-lg-add w-100 text-white font-weight-bold py-3 mt-1" type="button">Add Drinks</button>
                    </div>

                </sl-drawer>

                <!--Sub-Interactions-->

                <!--Basketball-->
                <sl-drawer placement="bottom" class="basketball" style="--size:47vw;">
                    <h2 id="drawerTitle" class="text-center font-weight-bold px-md-5">You're Challenging James!</h2>
                    <div id="basketball-phaser-game" class="d-flex justify-content-center"></div>
                </sl-drawer>

                <!--Compare Statistics-->
                <sl-drawer placement="bottom" class="compare-statistics" style="--size:47vw;">
                    <h3 id="drawerTitle" class="text-center font-weight-bold px-md-5">How Does Your Stats Compare With James?</h3>
                    <div class="px-4 mt-4">
                        <div class="row d-flex align-items-center">
                            <img class="profile-img mr-2" src="james-barker-profile.jpg" width="70" height="70" style="border-radius:50%;border:none;">
                            <span class="name-tags font-weight-bold align-self-center" style="font-size:20px;color:#3D2388;">James Barker</span>
                            <span class="name-tags font-weight-bold align-self-center ml-auto" style="font-size:20px;color:#BB37AD">Emilia Hurley</span> 
                            <img class="profile-img ml-2" src="emilia-hurley-profile.jpg" width="70" height="70" style="border-radius:50%;border:none;">
                        </div>
                        <div class="row">
                            <div class="col-6 d-flex flex-column justify-content-center align-items-center mt-3" style="color:#3D2388;">
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Total Drinks So far</span>
                                    <span>57</span>
                                </div>
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Est. Money Spent</span>
                                    <span>£285</span>
                                </div>
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Rolling Average</span>
                                    <span>1.83</span>
                                </div>
                            </div>
                            <div class="col-6 d-flex flex-column justify-content-center align-items-center mt-3" style="color:#BB37AD;">
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Total Drinks So far</span>
                                    <span>42</span>
                                </div>
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Est. Money Spent</span>
                                    <span>£210</span>
                                </div>
                                <div class="card info-card py-2 mt-3 text-center">
                                    <span>Rolling Average</span>
                                    <span>1.35</span>
                                </div>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center align-items-center mt-5">
                            <h4 class="font-weight-bold">Weekly Progress</h4>
                            <div id="cs-chart" class="d-flex align-items-center">
                                <div class="chart">
                                    <div class="barchart-1"></div>
                                    <div class="barchart-2"></div>
                                </div>
                                <div class="chart">
                                    <div class="barchart-3"></div>
                                    <div class="barchart-4"></div>
                                </div>
                                <div class="chart">
                                    <div class="barchart-5"></div>
                                    <div class="barchart-6"></div>
                                </div>
                                <div class="chart">
                                    <div class="barchart-7"></div>
                                    <div class="barchart-8"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="col-6">
                                <div class="card info-card py-2 mt-3 text-center" style="color:#3D2388;">
                                    <span>Drink Free Days</span>
                                    <span>11</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card info-card py-2 mt-3 text-center" style="color:#BB37AD;">
                                    <span>Drink Free Days</span>
                                    <span>15</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </sl-drawer>

                <!--Pub Quiz-->
                <sl-drawer placement="bottom" class="pub-quiz" style="--size:35vw;">
                    <h3 id="pubDrawerTitle" class="text-center font-weight-bold px-md-5">You're Challenging James!</h3>
                        <p id="instructions" class="text-center py-2 px-4">Answer the questions correctly to gain some extra points! Good Luck!</p>
                        <div class="quiz-container pt-md-5">
                            <div id="question-container" class="hide">
                                <div id="question" class="d-flex justify-content-center pb-2">Question</div>
                                <div id="answer-btns" class="btn-grid d-flex flex-column mt-2 p-md-3">
                                    <button class="btn btn-answer">Answer 1</button>
                                    <button class="btn btn-answer">Answer 2</button>
                                    <button class="btn btn-answer">Answer 3</button>
                                    <button class="btn btn-answer">Answer 4</button>
                                </div>
                            </div>
                            <div class="controls d-flex justify-content-center align-items-center">
                                <button id="start-btn" class="start-btn btn mt-5">Start</button>
                                <button id="next-btn" class="next-btn btn hide">Next</button>
                            </div>
                        </div>

                        <div id="finished-container" class="quiz-finished-container hide mt-3">
                            <div class="d-flex justify-content-center flex-column align-items-center">
                                <i class="far fa-7x fa-check-circle" style="color:#3D2388;"></i>
                                <h1 class="quiz-finished-header">Quiz Completed</h1>
                                <h2 class="quiz-finished-score">Your Score: <span id="score"></span></h2>
                                <p id="message">These points have been added to your total, send a challenge to James to see if he can do better!</p>
                                <button id="close-btn" class="close-btn btn mt-md-5">Send</button>
                            </div>
                        </div>
                </sl-drawer>

                <!--Add Button on Navigation-->
                <button id="addBtn" class="btn-circle btn-xl" href="#" role="button"><i class="fas fa-plus"></i></button>
            </div>     
        </div>
    </section>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        //initialise Shoelace drawer and add event listeners to toggle the drawer
        (() => {
            const drawer = document.querySelector('.drawer-placement-bottom');
            const openButton = document.getElementById('addBtn');
            const closeButton = drawer.querySelector('sl-button[type="primary"]');

            openButton.addEventListener('click', () => drawer.show());
            closeButton.addEventListener('click', () => drawer.hide());
        })();
    </script>

    <script>
        (() => {
            const drawer = document.querySelector('.basketball');
            const openButton = document.getElementById('send-challenge');
            const closeButton = drawer.querySelector('sl-button[type="primary"]');
    
            openButton.addEventListener('click', () => drawer.show());
            closeButton.addEventListener('click', () => drawer.hide());
        })();
    </script>

    <script>
         (() => {
            const drawer = document.querySelector('.compare-statistics');
            const openButton = document.getElementById('compare-statistics');
            const closeButton = drawer.querySelector('sl-button[type="primary"]');

            openButton.addEventListener('click', () => drawer.show());
            closeButton.addEventListener('click', () => drawer.hide());
        })();
    </script>

    <script>
        (() => {
        const drawer = document.querySelector('.pub-quiz');
        const openButton = document.getElementById('pub-quiz');
        const closeButton = drawer.querySelector('sl-button[type="primary"]');

        openButton.addEventListener('click', () => drawer.show());
        closeButton.addEventListener('click', () => drawer.hide());
    })();
    </script>

    <script>
        (() => {
            const drawer = document.querySelector('.share-bill');
            const openButton = document.getElementById('share-bill');
            const closeButton = drawer.querySelector('sl-button[type="primary"]');

            openButton.addEventListener('click', () => drawer.show());
            closeButton.addEventListener('click', () => drawer.hide());
        })();
    </script>

    <script>
        //add functionality to the add drinks ring

        //gather elements in the document - the sl-progress-ring, add button and minus button via classes & ID's 
        const progressRing = document.querySelector('.add-ring');
        const subtractButton = document.getElementById('minus-btn');
        const addButton = document.getElementById('add-btn');

        //gather elements for the add drinks 
        const homeRing = document.querySelector('.progress-ring-labels');
        const addDrinksButton = document.getElementById('drawerAdd');

        //gather drawer element
        const drawer = document.querySelector('.drawer-placement-bottom');


        //add event listener to the add button to increase the progress by 10
        addButton.addEventListener('click', () => {
        const percentage = Math.min(100, progressRing.percentage + 10);
        progressRing.percentage = percentage;
        progressRing.textContent = `${percentage}` / 10;
        });
        
        //add event listener to the minus button to decrease the progress by 10
        subtractButton.addEventListener('click', () => {
        const percentage = Math.max(0, progressRing.percentage - 10);
        progressRing.percentage = percentage;
        progressRing.textContent = `${percentage}` / 10;
        });

        //add event listener to the add drink button
        addDrinksButton.addEventListener('click', () => {
        const percentage = progressRing.percentage / 10;
        const homeRingPercentage = homeRing.percentage;
        const diff = homeRingPercentage - percentage;
        
        // if the difference is below 0, dont add the drinks to prevent negative values
        if (diff >= 0) {
            homeRing.percentage = diff;
            homeRing.textContent = `${diff}`;
            progressRing.percentage = 0;
            progressRing.textContent = `0`;
            drawer.hide();
        }
        });
    </script>
</body>
</html>
